### 배경

- 비트코인 백서의 10. Privacy에 프라이버시 향상 목적으로 ‘**각 거래마다 새로운 키 쌍을 생성해 동일한 소유자로 추적되지 않도록 하는 방식을 권장한다**’고 언급됨
- 거래마다 새로운 키쌍을 만든다면, **이론상 관리해야 할 키쌍이 기하급수적으로 늘어남**
- 이 문제를 **“HD Wallet (Hierarchical Deterministic Wallet)”** 구조로 해결 가능

### HDWallet(Hierarchical Deterministic Wallet)

- **계층적 결정적 지갑**
- 하나의 마스터 키로부터 여러 개의 **프라이빗 키 / 주소를 체계적으로 파생(Derive)하는 구조**
- HDWallet은 목적(코인 종류, 계정, 체인, 주소 등)을 분리해 키를 관리할 수 있다

HDWallet은 거래가 많아져도 **모든 키쌍을 따로 저장하거나 관리하지 않는다**

하나의 **마스터 시드(seed)** 에서 수학적으로 **무한히 많은 키쌍을 “필요할 때마다” 파생**하기 때문에, 키 관리 부담이 늘어나지 않는다

### 니모닉(**Mnemonic)**

- 12~24단어로 구성된 복구 문구 (BIP-39)
- 니모닉은 **엔트로피(entropy)** 를 사람이 읽을 수 있는 단어로 표현한 **시드 생성용 입력 데이터**
- 사람이 기억하기 쉬운 단어의 시퀀스를 이용하여 키를 만들 수 있다

### **엔트로피(entropy)**

- 니모닉과 시드의 근본이 되는 **무작위(randomness)** 데이터
- 엔트로피가 높을수록 추측이나 브루트포스(무차별 대입) 공격이 훨씬 어려움
- 니모닉 문구는 사실 “문자열로 표현된 엔트로피”

즉, **랜덤한 비트열(bit sequence)** 을 사람이 외우기 쉬운 단어로 바꾼 게 니모닉

### passphrase

- BIP-39 표준에 포함된 보안 확장 문구(Optional)
- 니모닉 단어만으로 지갑 복구가 가능하지만 추가로 passphrase를 넣은다면 니모닉이 같아도 서로 다른 지갑이 만들어짐
- 예를 들어 같은 12단어라도 passphrase를 설정하면 전혀 다른 주소를 가짐

### 시드(Seed)

- 위 니모닉(Mnemonic)과 Passphrase를 PBKDF2-HMAC-SHA512 함수를 통해 512비트 시드로 변환
    - Passphrase는 아래 WalletCore를 실습할 때 설명하도록 하겠다
- 이 시드를 다시 HMAC-SHA512로 해싱
    - 왼쪽 256비트: 마스터 비밀키(Master Private Key)
    - 오른쪽 256비트: 체인 코드(Chain Code)
- 이 두 값이 HDWallet 트리의 루트 노드가 된다
